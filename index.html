<!DOCTYPE html>
<html lang="en">

<head>

	<title>Code Editor</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="A lightweight & free solution to online code editing. Supports HTML, CSS, and Javascript out-of-the-box and lets you easily generate a permanent webpage. Features error-checking, autocomplete, and autosaving.">
	<script type="application/ld+json">
	{
	"@context" : "http://schema.org",
	"@type" : "SoftwareApplication",
	"name" : "Code Editor",
	"aggregateRating" : {
		"@type" : "AggregateRating",
		"ratingValue" : "4.8",
		"ratingCount" : "287"
	},
	"operatingSystem" : "Chome/Safari/Firefox",
	"applicationCategory" : "Code Editor"
	}
	</script>

	<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
	<link rel="manifest" href="favicon/apple-touch-iconfavicon/site.webmanifest">
	<link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#0021b7">
	<link rel="shortcut icon" href="favicon/favicon.ico">
	<meta name="apple-mobile-web-app-title" content="Code Editor">
	<meta name="application-name" content="Code Editor">
	<meta name="msapplication-TileColor" content="#0058d8">
	<meta name="msapplication-config" content="favicon/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">

	<!-- animate.css -->
	<link rel="stylesheet" href="animate.css">
	<script src="wow.js"></script>
	<script>new WOW().init();</script>

	<!-- font awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,800" rel="stylesheet">
	<link href="style.css" rel="stylesheet">

	<link rel="stylesheet" href="https://codemirror.net/lib/codemirror.css">

</head>

<body onbeforeunload="window.scrollTo(0, 0);" style="overflow-x:hidden;transition:background-color 0.5s 0.5s;" onresize="resize()" onload="loadCode(); hideLoadingBar();">

	<div id="spinnerOverlay">
		<div class="spinner" id="spinner">
			<div class="bounce1"></div>
			<div class="bounce2"></div>
			<div class="bounce3"></div>
		</div>
	</div>

	<div class="smallscreen" style="margin:auto;">

		<div style="height:100vh;">
			<h1 id="smallScreenTitle" class=""><span class="bold blue">&lt;Code&gt;</span> <span class="light">Editor</span></h1>
			<p id="smallScreenSubtitle" class="">Online code editing. Made <span class="small semi-bold blue">simple</span>.</p>
		</div>

		<div class="wow slideInRight ad">
			<i class="fas fa-bolt" style="font-size:4em;color:#0021b7"></i>
			<br><br> <span style="font-size:1.5em;">Fast and Lightweight</span>
			<p>You're ready to write code as soon as you open the website. No logins, ads, or any of that annoying jazz. Code Tick is designed to be <span class="blue">simple</span> and <span class="blue">efficient</span>.</p>
		</div>

		<br><br>

		<div class="wow slideInLeft ad">
			<i class="fas fa-save" style="font-size:4em;color:#0021b7"></i>
			<br><br> <span style="font-size:1.5em;">Live Editing</span>
			<p>You start writing code, while we render it live. Easy debugging and writing, all without the hassle of saving or uploading. Don't worry about losing your work, because we <span class="blue">auto-save</span> all of your code.</p>
		</div>

		<br><br>

		<div class="wow slideInRight ad">
			<i class="fas fa-exclamation-circle" style="font-size:4em;color:#0021b7"></i>
			<br><br> <span style="font-size:1.5em;">Error Checking</span>
			<p>Spending entire nights trying to figure out what's wrong is <i>never</i> fun. Instead of countless hours on online forums, try out our <span class="blue">code linter</span>, and save a couple of hours.</p>
		</div>

		<br><br>

		<div class="wow slideInLeft ad">
			<i class="fas fa-desktop" style="font-size:4em;color:#0021b7"></i>
			<br><br> <span style="font-size:1.5em;">Generate Webpage</span>
			<p>When you do finish your big project, you'll want some place to show it off! That's why we offer <span class="blue">unlimited</span> webpages that you can generate at your disposal.</p>
		</div>

	</div>

	<div class="bigscreen" id="main">

		<h1><span class="bold blue">&lt;Code&gt;</span> <span class="light">Editor</span></h1>
		<p class="light">Online code editing. Made <span class="semi-bold blue">simple</span>.</p>

		<select id="mode" onchange="modeChange()">
			<option value="html">HTML</option>
			<option value="css">CSS</option>
			<option value="js">Javascript</option>
		</select>

		<button onclick="showInfo();" class="share white"><i class="fas fa-info-circle"></i></button>

		<table>
			<tr>
				<td><form id="form" method="POST" action="https://thakkaha.dev.fast.sheridanc.on.ca/pme/upload.php"><textarea class="editor" id="editor" autofocus></textarea><input onsubmit="getCode();" id="final" name="code"></form></td>
				<td><iframe class="result" id="result"></iframe></td>
			</tr>
			<tr style="text-align:right">
				<td></td>
				<td>
					<button onclick="resetCode();" class="share red">Reset Code</button>
					<button onclick="getCode();" class="share">Generate Page</button>
				</td>
			</tr>
		</table>
	</div>

	<div id="info">
		<button onclick="hideInfo();" class="share white animated fadeInRight animation-no-delay"><i class="fas fa-arrow-circle-left"></i></button>

		<div class="animated fadeInLeft animation-no-delay" style="width:50%">
			<h1><span class="light">Code Editor // </span><span class="bold blue">FAQ</span></h1>
			<p>How many webpages can I generate per day? <span class="blue"></span><br>
			<span class="light">As many as you can make.</span></p>

			<p>How do I browse other people's projects? <span class="blue"></span><br>
			<span class="light">You can't... as of right now.</span></p>
		</div>

		<div class="animated fadeInLeft animation-delay-500">
			<h1><span class="light">Code Editor // </span><span class="bold blue">Features</span></h1>
			<p class="light">-code folding <br>-error checking <br>-autocomplete <br>-autosave/live editing <br>-higlight matching tags <br>-generate webpage easily<span class="semi-bold blue"></span></p>
		</div>

		<div class="animated fadeInLeft animation-delay-1000">
			<h1><span class="light">Code Editor // </span><span class="bold blue">Keyboard Shortcuts</span></h1>
			<table class="light" cellspacing="20">
				<tr>
					<td>CTRL + J</td>
					<td style="text-align:right">to matching tags</td>
				</tr>
				<tr>
					<td>CTRL + Space</td>
					<td style="text-align:right">enable autocomplete</td>
				</tr>
				<tr>
					<td>CTRL + S</td>
					<td style="text-align:right">save project</td>
				</tr>
			</table>
		</div>

		<div class="animated fadeInLeft animation-delay-1500">
			<h1><span class="light">Code Editor // </span><span class="bold blue">Code</span></h1>
			<p class="light"><a target="_blank" href="https://github.com/paramt/CodeEditor">Github</a><br>(Based on <a target="_blank" href="https://codemirror.net">CodeMirror</a>)</p>
		</div>

		<div class="animated fadeInLeft animation-delay-2000">
			<h1><span class="light">Code Editor // </span><span class="bold blue">Suggestions</span></h1>
			<p class="light">Contact <a target="_blank" href="http://param.me/?ref=code#contact">Param Thakkar</a></p>
		</div>
	</div>

<!-- codemirror -->
<script src="https://codemirror.net/lib/codemirror.js"></script>
<script src="https://codemirror.net/mode/xml/xml.js"></script>
<script src="https://codemirror.net/mode/javascript/javascript.js"></script>
<script src="https://codemirror.net/mode/css/css.js"></script>
<script src="https://codemirror.net/mode/htmlmixed/htmlmixed.js"></script>

<!-- code folding -->
<script src="https://codemirror.net/addon/fold/foldcode.js"></script>
<script src="https://codemirror.net/addon/fold/foldgutter.js"></script>
<script src="https://codemirror.net/addon/fold/brace-fold.js"></script>
<script src="https://codemirror.net/addon/fold/indent-fold.js"></script>
<script src="https://codemirror.net/addon/fold/markdown-fold.js"></script>
<script src="https://codemirror.net/addon/fold/comment-fold.js"></script>
<link rel="stylesheet" href="https://codemirror.net/addon/fold/foldgutter.css"/>

<!-- autocomplete -->
<script src="https://codemirror.net/addon/edit/matchbrackets.js"></script>
<script src="https://codemirror.net/addon/hint/show-hint.js"></script>
<script src="https://codemirror.net/addon/hint/javascript-hint.js"></script>
<script src="https://codemirror.net/addon/hint/html-hint.js"></script>
<script src="https://codemirror.net/addon/hint/xml-hint.js"></script>

<script src="https://codemirror.net/addon/hint/css-hint.js"></script>
<link rel="stylesheet" href="https://codemirror.net/addon/hint/show-hint.css">


<!-- lint (error checking) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jshint/2.9.5/jshint.min.js"></script>
<script src="https://unpkg.com/csslint@1.0.5/dist/csslint.js"></script>

<script src="https://codemirror.net/addon/selection/active-line.js"></script>
<script src="https://codemirror.net/addon/search/match-highlighter.js"></script>
<script src="https://codemirror.net/addon/lint/lint.js"></script>
<script src="https://codemirror.net/addon/lint/javascript-lint.js"></script>
<script src="https://codemirror.net/addon/lint/css-lint.js"></script>
<link rel="stylesheet" href="https://codemirror.net/addon/lint/lint.css">

<!-- auto close tags + brackets -->
<script src="https://codemirror.net/addon/fold/xml-fold.js"></script>
<script src="https://codemirror.net/addon/edit/closetag.js"></script>
<script src="https://codemirror.net/addon/edit/closebrackets.js"></script>

<!-- tag matcher (highlight open+close tags) -->
<script src="https://codemirror.net/addon/edit/matchtags.js"></script>

<script>

	/** editor **/
	var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
		mode: "text/html",
    theme: "default",
    lineNumbers: true,
		extraKeys: {"Ctrl-Space":"autocomplete", "Ctrl-J": "toMatchingTag"},
		indentUnit: 4,
		autoCloseTags: true,
		autoCloseBrackets: true,
		matchTags: {bothTags: true},
		foldGutter: true,
		gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter", "CodeMirror-lint-markers"],
		lint: true,

	});

	function loadCode(){
		if(localStorage.getItem("html") === null && localStorage.getItem("css") === null && localStorage.getItem("js") === null){
			editor.setValue("<html>\n\t<head>\n\t\t<title>My First Project!</title>\n\t</head>\n\n\t<body>\n\t\t\n\t</body>\n</html>");
			localStorage.setItem("html","<html>\n\t<head>\n\t\t<title>My First Project!</title>\n\t</head>\n\n\t<body>\n\t\t\n\t</body>\n</html>");
			localStorage.setItem("js","var num = 2;\nvar string = \"some text\";\nvar array = [42, 11, -13, 14];\n\nfunction myFunction(){\n\t\n}");
			localStorage.setItem("css","element-selector{\n\t\n}\n\n.class-selector{\n\t\n}\n\n#id-selector{\n\t\n}");
		} else {
			editor.setValue(localStorage.getItem("html"));
		}

		var frame = result.contentWindow.document;
		frame.open();
		frame.writeln(localStorage.getItem("html") + "\<style\>" + localStorage.getItem("css") + "\</style\> \<script\>" + localStorage.getItem("js") + "\</script\>");
		frame.close();

		compile();
	};

	function modeChange(){
		if(document.getElementById("mode").value == "js"){
			editor.setOption("mode", "javascript");
			editor.setValue(localStorage.getItem("js"));
		} else if(document.getElementById("mode").value == "css"){
			editor.setOption("mode", "css");
			editor.setValue(localStorage.getItem("css"));
		} else if(document.getElementById("mode").value == "html"){
			editor.setOption("mode", "text/html");
			editor.setValue(localStorage.getItem("html"));
		}
	}

	editor.setSize((window.innerWidth/2)-50, window.innerHeight-250);

	function resize(){
		editor.setSize((window.innerWidth/2)-50, window.innerHeight-250);
		var result = document.getElementById("result");
		result.style.width = window.innerWidth/2 + "px";
		result.style.height = window.innerHeight-250 + "px";
	}

	/** result **/
	var result = document.getElementById("result");
	result.style.width = window.innerWidth/2 + "px";
	result.style.height = window.innerHeight-250 + "px";

	function compile() {
		var frame = result.contentWindow.document;

		document.body.onkeyup = function(){
			if(document.getElementById("mode").value == "js"){
				localStorage.setItem("js", editor.getValue());
			} else if(document.getElementById("mode").value == "css"){
				localStorage.setItem("css", editor.getValue());
			} else if(document.getElementById("mode").value == "html"){
				localStorage.setItem("html", editor.getValue());
			}

			frame.open();
			frame.writeln(localStorage.getItem("html") + "<style>" + localStorage.getItem("css") + "</style> \<script\>" + localStorage.getItem("js") + "\</script\>");
			frame.close();
		};
	};

	function getCode(){
		document.getElementById("final").value = window.btoa(localStorage.getItem("html") + "\<style\>" + localStorage.getItem("css") + "\</style\> \<script\>" + localStorage.getItem("js") + "\</script\>");
		document.getElementById('form').submit();
	}

	function resetCode(){
		if (confirm("Are you sure you want to reset all code? You will lose your work and won't be able to undo it.")){
			editor.setValue("<html>\n\t<head>\n\t\t<title>My First Project!</title>\n\t</head>\n\n\t<body>\n\t\t\n\t</body>\n</html>");
			localStorage.setItem("html","<html>\n\t<head>\n\t\t<title>My First Project!</title>\n\t</head>\n\n\t<body>\n\t\t\n\t</body>\n</html>");
			localStorage.setItem("js","var num = 2;\nvar string = \"some text\";\nvar array = [42, 11, -13, 14];\n\nfunction myFunction(){\n\t\n}");
			localStorage.setItem("css","element-selector{\n\t\n}\n\n.class-selector{\n\t\n}\n\n#id-selector{\n\t\n}");
			document.getElementById("mode").value = "html";
			editor.setOption("mode", "text/html");
		}
	}
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
// Function to download data to a file
function download(data, filename, type) {
    var file = new Blob([data], {type: type});
    if (window.navigator.msSaveOrOpenBlob) // IE10+
        window.navigator.msSaveOrOpenBlob(file, filename);
    else { // Others
        var a = document.createElement("a"),
                url = URL.createObjectURL(file);
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        setTimeout(function() {
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }, 0);
    }
}

$(document).keydown(function(e){
	//CTRL + S keydown combo
	if(e.ctrlKey && e.keyCode == 83){
		event.preventDefault();
		var title = prompt("What would you like to title your project?", "MyProject");
		if (title === null) {
			return;
		};
		download(localStorage.getItem("html") + "\<style\>" + localStorage.getItem("css") + "\</style\> \<script\>" + localStorage.getItem("js") + "\</script\>", title+".html", "html");

	}
	if(e.ctrlKey && e.keyCode == 65){
		event.preventDefault();
		document.getElementById("editor").execCommand("selectAll");
	}
})
</script>

<script>
	function hideLoadingBar(){
		document.getElementById("spinner").style.filter = "opacity(0)";
		document.getElementById("spinnerOverlay").style.filter = "opacity(0)";
		document.getElementById("spinnerOverlay").style.zIndex = "-1";

		document.getElementById("smallScreenTitle").className = "animated fadeInDown small title scroll-resize animation-no-delay";
		document.getElementById("smallScreenSubtitle").className = "animated fadeInLeft small light subtitle animation-delay-500";
		window.setTimeout(function(){document.body.style.overflow = "auto";}, 2000);
	}

	function showInfo(){
		document.getElementById("main").className = ("animated fadeOutUp");
		document.getElementById("info").style.display = "block";
	}

	function hideInfo(){
		document.getElementById("info").className = ("animated fadeOutLeft");
		document.body.style.backgroundColor = "#00167a";
		window.setTimeout(function(){location.reload();}, 1000);
	}
</script>
</body>
</html>
